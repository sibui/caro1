<!-- Change for Project 3 -->

<div class="container">
    <form action="signup" method="post" onsubmit="return change()">
		<input type="hidden" name="action" value="signup">
        <table align="center">
            <tr>
                <td>Name:</td>
                
                <td>
                	<p style="color:red;" id="nameP"></p>
                	<input type="text" id="name" name="name"></td>       
            </tr>
            <tr>
                <td>Role:</td>
                <td>
                <p style="color:red;" id="roleP"></p>
               
                <select id="role" name="role">
                		<option value=""></option>
                        <option>owner</option>
                        <option>customer</option>
                </select></td>
            </tr>
            <tr>
                <td>Age:</td>
                <td>
                	<p style="color:red;" id="ageP"></p>
                	<input type="text" id="age" name="age"></td>
            </tr>
            <tr>
                <td>State:</td>
                <td>
              		<p style="color:red;" id="stateP"></p>
            
                	<select id="state" name="state">
                		<option value=""></option>
                        <option>Alabama</option>
                        <option>Alaska</option>
                        <option>Arizona</option>
                        <option>Arkansas</option>
                        <option>California</option>
                        <option>Colorado</option>
                        <option>Connecticut</option>
                        <option>Delaware</option>
                        <option>Florida</option>
                        <option>Georgia</option>
                        <option>Hawaii</option>
                        <option>Idaho</option>
                        <option>Illinois</option>
                        <option>Indiana</option>
                        <option>Iowa</option>
                        <option>Kansas</option>
                        <option>Kentucky</option>
                        <option>Louisiana</option>
                        <option>Maine</option>
                        <option>Maryland</option>
                        <option>Massachusetts</option>
                        <option>Michigan</option>
                        <option>Minnesota</option>
                        <option>Mississippi</option>
                        <option>Missouri</option>
                        <option>Montana</option>
                        <option>Nebraska</option>
                        <option>Nevada</option>
                        <option>New Hampshire</option>
                        <option>New Jersey</option>
                        <option>New Mexico</option>
                        <option>New York</option>
                        <option>North Carolina</option>
                        <option>North Dakota</option>
                        <option>Ohio</option>
                        <option>Oklahoma</option>
                        <option>Oregon</option>
                        <option>Pennsylvania</option>
                        <option>Rhode Island</option>
                        <option>South Carolina</option>
                        <option>South Dakota</option>
                        <option>Tennessee</option>
                        <option>Texas</option>
                        <option>Utah</option>
                        <option>Vermont</option>
                        <option>Virginia</option>
                        <option>Washington</option>
                        <option>West Virginia</option>
                        <option>Wisconsin</option>
                        <option>Wyoming</option>
                </select></td>
            </tr>
            <tr>
                <td><input type="submit" value="Signup" id="submit"></td>
            </tr>
        </table>
    </form>
</div>

<script type="text/javascript">
	function change(){ 
		var name = document.getElementById('name').value;
		var role = document.getElementById('role').selectedIndex;
		var age = document.getElementById('age').value;
		var state = document.getElementById('state').selectedIndex;
		
		 var1 = true;
		 var2 = true;
		 var3 = true;
		 var4 = true;


		if(name == ""){
			var1 = false;
			document.getElementById("nameP").innerHTML = "Name not provided.";
		}
		else{
			// check if username is already taken
			var xmlHttp;
			xmlHttp = new XMLHttpRequest();
		
			var responseHandler = function()
			{
				if (xmlHttp.readyState == 4) {
					document.getElementById("nameP").innerHTML = xmlHttp.responseText;
					console.log(xmlHttp.responseText);
// 					if (xmlHttp.status == 200) {
// 						return;
// 					}
// 					else {
// 						alert("HTTP status is " + xmlHttp.status + " instead of 200");
// 						return false;
// 					}
				}
			}
	
		  	xmlHttp.onreadystatechange = responseHandler;
	
		  	xmlHttp.open("GET","/student-example/jsp/username.jsp?name="+name,true);
		  	xmlHttp.send(null);
			
		  	var1 = false;
			document.getElementById("nameP").innerHTML = "";
		}
		
		if(age == ""){
			var2 = false;
			document.getElementById("ageP").innerHTML = "Age not provided.";
		}
		else{
			var2 = true;
			document.getElementById("ageP").innerHTML = "";
		}
		
		if(role == ""){
			var3 = false;
			document.getElementById("roleP").innerHTML = "Role not provided.";
		}
		else{
			var3 = true;
			document.getElementById("roleP").innerHTML = "";

		}
		
		if(state == ""){
			var4 = false;
			document.getElementById("stateP").innerHTML = "State not provided.";
		}
		else{
			var4 = true;
			document.getElementById("stateP").innerHTML = "";
		}
		
		if(var1 == false || var2 == false || var3 == false || var4 == false){
			return false;	
		}
		else{
			
		}
	}
</script>